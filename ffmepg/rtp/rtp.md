# RTP 学习

- [RTP 学习](#rtp-学习)
  - [术语](#术语)
  - [介绍](#介绍)
  - [RTP 使用场景](#rtp-使用场景)
  - [参考](#参考)

## 术语

```txt
RTP
  real-time transport protocol, 实时传输协议
RTCP
  RTP control protocol, RTP 控制协议
RTP payload
  RTP 传输的一包数据，比如音频采样或压缩的视频数据
RTP packet
  一个数据包包含混合的 RTP 头，一个可能为空的源列表，以及载荷数据
RTCP packet
  一个控制包包含混合的类似 RTP 数据包的头，之后是取决于 RTCP 包类型的结构化元素
RTP session
  使用 RTP 通讯的一组参与者的联系。一个参与者可同时参与多个 RTP 会话。在一个多媒体会话中，每个媒介通常有自己单独的 RTP 会话和 RTCP 包，除非编码自身复用多个媒体到一个单独的数据流。一个参与者通过不同会话的接收使用不同的目的传输地址区分不同的 RTP 会话，每个传输地址对包含一个网络地址和一个 RTP/RTCP 端口对。一个 RTP 会话中的所有参与者在 IP 组播时可以共享一个目的传输地址对；在单独的单播地址和传输端口对时，每个参与者的目的传输地址对可能是不一样的。在单播时，一个参与者可以使用相同的端口对接收来自会话中的其他参与者，也可以为每个参与者设置不一样的端口对。
  RTP 会话的一个重要特点是每个 RTP 会话维护一个完全的、单独的 SSRC 标识符。在一个 RTP 会话中的参与者集合包含了可以接收 SSRC 标识符的参与者，这个 SSRC 标识符可以通过任何一个参与者在 RTP 的 SSRC 或 CSRC 或 RTCP 传输。
SSRC
  synchronization source, 同步源。RTP 包的流的源，通过 RTP 头中一个 32 位的数字 SSRC 标识。
```

## 介绍

RTP 提供端到端的实时数据分发服务。这些服务包括载荷类型标识符、序列号、时间戳和分发监控。

应用通常在 UDP 上运行 RTP，利用 RTP 的多路复用和校验和服务。但是 RTP 也可以用于其他底层网络或传输协议。如果底层网络提供多播，RTP 支持将数据传输到多个目的地。

**注意**：RTP 本身不提供任何机制保证及时分发或其他服务的质量性保证，而是依赖底层服务实现这些。RTP 不保证分发和避免分发乱序，也不会假定底层网卡是可靠的且顺序分发包。RTP 包含的序列号支持接收者重新组织发送者发送的包顺序，但是也可使用序列号确定一个包的合适位置，比如在视频解码时不需要按序解码包。

RTP 包含两个紧密相关的部分：

- RTP：携带具有实时属性的数据
- RTCP：监控服务的质量，并在一个持续性会话中传输参与者的信息。

RTP 是一个不完整的协议框架。通过修改和/或增加所需的头域定制 RTP。对于一个专门的应用的完整的 RTP 规格文档，除了此文档，还需要一个或多个其他文档：

- 概述规格文档：定义一系列的载荷类型编码和对应的载荷格式。
- 载荷格式规格文档：定义如何通过 RTP 携带一个专门的载荷，比如一个音频或视频编码

## RTP 使用场景

- 简单的多方语音会议
- 音视频会议：音频和视频经过单独的 RTP 会话。在 RTP 层，音频和视频会话没有直接的连接，但是一个用户可在两个会话的 RTCP 包使用相同的规范名称，以便会话可以被联系起来

## 参考

- [rfc 3550-RTP: A Transport Protocol for Real-Time Applications](https://tools.ietf.org/html/rfc3550)
- [rfc 3551- RTP Profile for Audio and Video Conferences with Minimal Control](https://tools.ietf.org/html/rfc3551)
